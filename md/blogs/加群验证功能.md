# 加群验证功能
## 什么是加群验证功能
加群验证功能就是用户想要加入群时，必须经过验证通过才能加入。在各个社交软件上的交互也各不相同，以微信来说，100人一下是随便加群的，超过100人才会给群主审批是否加群；而QQ功能则复杂的多，可以设置问题，答对就入群，也可以群主或管理员审批；可能其它更多的选择，比如付费才能加群，或者看一段广告才能加群等等。

## 野火IM会开发加群验证功能吗
不会，野火IM只专注于通讯能力，提供有加群的客户端接口和服务器接口，具体业务（如何加群）需要客户根据自己的产品定义在应用服务器进行开发。

## 如何实现微信式的加群验证
微信的加群验证是最简单最容易实现的。方法如下：
1. 创建一个普通成员或者机器人成员“群审批助手”。
2. 客户端申请加群不再通过客户端接口进行，改用调用appserver接口申请加群。
3. appserver 检查群组成员个数，100人一下直接调用加群server api把用户加入群组。
4. 当超过100人时，保存下申请记录，然后查找群主和群管理员，以”群审批助手“的身份给他们发送自定义消息。
5. 客户端上，群主或管理员收到群审批助手的自定义消息，UI要重写，展示加群申请信息和状态（需要从应用服务更新状态）。
6. 群主或管理员处理申请，调用appserver接口进行处理，更改申请的状态，如果是允许的就把用户加入群中。

## 如何实现QQ式的加群验证
QQ的功能更强大实现起来也更复杂，但原理都是大同小异的，客户端请求appserver，appserver来实现业务逻辑，appserver通过server api发送消息来通知客户端，appserver通过server api加群接口来把用户加入群中。

## 其它
常遇到的问题就是需要对群通知做修改，比如“群管理员XX同意了XX的加群申请”或者”XXX通过答题加入了群组”等。可以修改加群通知消息，然后调用server api把用户加入群时填上修改过的通知消息。但需要注意：1，消息的type不能变，因为协议栈需要识别出来是加群通知，从而触发群成员信息的主动更新；2，通知消息现有的字段要不变，消息内有个json文件，可以添加业务上需要的字段，但不要改现有字段。
